'use strict';

var isStream = require('isstream');
var promisify = require('promisify-es6');
var DAGNodeStream = require('../dagnode-stream');

module.exports = function (send) {
  return promisify(function (files, callback) {
    var ok = Buffer.isBuffer(files) || isStream.isReadable(files) || Array.isArray(files);

    if (!ok) {
      return callback(new Error('"files" must be a buffer, readable stream, or array of objects'));
    }

    var request = { path: 'add', files: files

      // Transform the response stream to DAGNode values
    };var transform = function transform(res, callback) {
      return DAGNodeStream.streamToValue(send, res, callback);
    };
    send.andTransform(request, transform, callback);
  });
};