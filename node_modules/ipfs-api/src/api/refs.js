'use strict';

var promisify = require('promisify-es6');
var streamToValue = require('../stream-to-value');

module.exports = function (send) {
  var refs = promisify(function (args, opts, callback) {
    if (typeof opts === 'function') {
      callback = opts;
      opts = {};
    }

    var request = {
      path: 'refs',
      args: args,
      qs: opts
    };

    send.andTransform(request, streamToValue, callback);
  });

  refs.local = promisify(function (opts, callback) {
    if (typeof opts === 'function') {
      callback = opts;
      opts = {};
    }

    var request = {
      path: 'refs/local',
      qs: opts
    };

    send.andTransform(request, streamToValue, callback);
  });

  return refs;
};